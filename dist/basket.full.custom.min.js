(function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function r(t){return"object"==typeof t&&null!==t}function n(){}function o(t,e){for(var r=0,n=t.length;n>r;r++)if(t[r]===e)return r;return-1}function u(t){var e=t._promiseCallbacks;return e||(e=t._promiseCallbacks={}),e}function i(t,e){return"onerror"===t?(be.on("error",e),void 0):2!==arguments.length?be[t]:(be[t]=e,void 0)}function a(){setTimeout(function(){for(var t,e=0;Ee.length>e;e++){t=Ee[e];var r=t.payload;r.guid=r.key+r.id,r.childGuid=r.key+r.childId,r.error&&(r.stack=r.error.stack),be.trigger(t.name,t.payload)}Ee.length=0},50)}function s(t,e,r){1===Ee.push({name:t,payload:{key:e._guidKey,id:e._id,eventName:t,detail:e._result,childId:r&&r._id,label:e._label,timeStamp:_e(),error:be["instrument-with-stack"]?Error(e._label):null}})&&a()}function c(){return new TypeError("A promises callback cannot return that same promise.")}function f(){}function l(t){try{return t.then}catch(e){return Te.error=e,Te}}function p(t,e,r,n){try{t.call(e,r,n)}catch(o){return o}}function h(t,e,r){be.async(function(t){var n=!1,o=p(r,e,function(r){n||(n=!0,e!==r?d(t,r):_(t,r))},function(e){n||(n=!0,g(t,e))},"Settle: "+(t._label||" unknown promise"));!n&&o&&(n=!0,g(t,o))},t)}function v(t,e){e._state===Se?_(t,e._result):e._state===Ae?(e._onError=null,g(t,e._result)):w(e,void 0,function(r){e!==r?d(t,r):_(t,r)},function(e){g(t,e)})}function y(t,r){if(r.constructor===t.constructor)v(t,r);else{var n=l(r);n===Te?g(t,Te.error):void 0===n?_(t,r):e(n)?h(t,r,n):_(t,r)}}function d(e,r){e===r?_(e,r):t(r)?y(e,r):_(e,r)}function m(t){t._onError&&t._onError(t._result),b(t)}function _(t,e){t._state===xe&&(t._result=e,t._state=Se,0===t._subscribers.length?be.instrument&&ke("fulfilled",t):be.async(b,t))}function g(t,e){t._state===xe&&(t._state=Ae,t._result=e,be.async(m,t))}function w(t,e,r,n){var o=t._subscribers,u=o.length;t._onError=null,o[u]=e,o[u+Se]=r,o[u+Ae]=n,0===u&&t._state&&be.async(b,t)}function b(t){var e=t._subscribers,r=t._state;if(be.instrument&&ke(r===Se?"fulfilled":"rejected",t),0!==e.length){for(var n,o,u=t._result,i=0;e.length>i;i+=3)n=e[i],o=e[i+r],n?x(r,n,o,u):o(u);t._subscribers.length=0}}function E(){this.error=null}function k(t,e){try{return t(e)}catch(r){return je.error=r,je}}function x(t,r,n,o){var u,i,a,s,f=e(n);if(f){if(u=k(n,o),u===je?(s=!0,i=u.error,u=null):a=!0,r===u)return g(r,c()),void 0}else u=o,a=!0;r._state!==xe||(f&&a?d(r,u):s?g(r,i):t===Se?_(r,u):t===Ae&&g(r,u))}function S(t,e){var r=!1;try{e(function(e){r||(r=!0,d(t,e))},function(e){r||(r=!0,g(t,e))})}catch(n){g(t,n)}}function A(t,e,r){return t===Se?{state:"fulfilled",value:r}:{state:"rejected",reason:r}}function T(t,e,r,n){var o=this;o._instanceConstructor=t,o.promise=new t(f,n),o._abortOnReject=r,o._validateInput(e)?(o._input=e,o.length=e.length,o._remaining=e.length,o._init(),0===o.length?_(o.promise,o._result):(o.length=o.length||0,o._enumerate(),0===o._remaining&&_(o.promise,o._result))):g(o.promise,o._validationError())}function j(t,e){return new Oe(this,t,!0,e).promise}function O(t,e){function r(t){d(u,t)}function n(t){g(u,t)}var o=this,u=new o(f,e);if(!me(t))return g(u,new TypeError("You must pass an array to race.")),u;for(var i=t.length,a=0;u._state===xe&&i>a;a++)w(o.resolve(t[a]),void 0,r,n);return u}function C(t,e){var r=this;if(t&&"object"==typeof t&&t.constructor===r)return t;var n=new r(f,e);return d(n,t),n}function R(t,e){var r=this,n=new r(f,e);return g(n,t),n}function I(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function P(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function N(t,r){var n=this;n._id=qe++,n._label=r,n._state=void 0,n._result=void 0,n._subscribers=[],be.instrument&&ke("created",n),f!==t&&(e(t)||I(),n instanceof N||P(),S(n,t))}function q(t,e,r){this._superConstructor(t,e,!1,r)}function M(t,e){return new q(Me,t,e).promise}function V(t,e){return Me.all(t,e)}function D(t,e){Qe[Ue]=t,Qe[Ue+1]=e,Ue+=2,2===Ue&&Je()}function U(){var t=process.nextTick,e=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(e)&&"0"===e[1]&&"10"===e[2]&&(t=setImmediate),function(){t(H)}}function Y(){return function(){Ye(H)}}function J(){var t=0,e=new Le(H),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}function K(){var t=new MessageChannel;return t.port1.onmessage=H,function(){t.port2.postMessage(0)}}function G(){return function(){setTimeout(H,1)}}function H(){for(var t=0;Ue>t;t+=2){var e=Qe[t],r=Qe[t+1];e(r),Qe[t]=void 0,Qe[t+1]=void 0}Ue=0}function L(){try{var t=require,e=t("vertx");return Ye=e.runOnLoop||e.runOnContext,Y()}catch(r){return G()}}function B(t){var e={};return e.promise=new Me(function(t,r){e.resolve=t,e.reject=r},t),e}function F(t,r,n){return Me.all(t,n).then(function(t){if(!e(r))throw new TypeError("You must pass a function as filter's second argument.");for(var o=t.length,u=Array(o),i=0;o>i;i++)u[i]=r(t[i]);return Me.all(u,n).then(function(e){for(var r=Array(o),n=0,u=0;o>u;u++)e[u]&&(r[n]=t[u],n++);return r.length=n,r})})}function Q(t,e,r){this._superConstructor(t,e,!0,r)}function W(t,e,r){this._superConstructor(t,e,!1,r)}function X(t,e){return new W(Me,t,e).promise}function $(t,e){return new $e(Me,t,e).promise}function z(t,r,n){return Me.all(t,n).then(function(t){if(!e(r))throw new TypeError("You must pass a function as map's second argument.");for(var o=t.length,u=Array(o),i=0;o>i;i++)u[i]=r(t[i]);return Me.all(u,n)})}function Z(){this.value=void 0}function te(t){try{return t.then}catch(e){return rr.value=e,rr}}function ee(t,e,r){try{t.apply(e,r)}catch(n){return rr.value=n,rr}}function re(t,e){for(var r,n,o={},u=t.length,i=Array(u),a=0;u>a;a++)i[a]=t[a];for(n=0;e.length>n;n++)r=e[n],o[r]=i[n+1];return o}function ne(t){for(var e=t.length,r=Array(e-1),n=1;e>n;n++)r[n-1]=t[n];return r}function oe(t,e){return{then:function(r,n){return t.call(e,r,n)}}}function ue(t,e){var r=function(){for(var r,n=this,o=arguments.length,u=Array(o+1),i=!1,a=0;o>a;++a){if(r=arguments[a],!i){if(i=se(r),i===nr){var s=new Me(f);return g(s,nr.value),s}i&&i!==!0&&(r=oe(i,r))}u[a]=r}var c=new Me(f);return u[o]=function(t,r){t?g(c,t):void 0===e?d(c,r):e===!0?d(c,ne(arguments)):me(e)?d(c,re(arguments,e)):d(c,r)},i?ae(c,u,t,n):ie(c,u,t,n)};return r.__proto__=t,r}function ie(t,e,r,n){var o=ee(r,n,e);return o===rr&&g(t,o.value),t}function ae(t,e,r,n){return Me.all(e).then(function(e){var o=ee(r,n,e);return o===rr&&g(t,o.value),t})}function se(t){return t&&"object"==typeof t?t.constructor===Me?!0:te(t):!1}function ce(t,e){return Me.race(t,e)}function fe(t,e){return Me.reject(t,e)}function le(t,e){return Me.resolve(t,e)}function pe(t){throw setTimeout(function(){throw t}),t}function he(t,e){be.async(t,e)}function ve(){be.on.apply(be,arguments)}function ye(){be.off.apply(be,arguments)}var de;de=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var me=de,_e=Date.now||function(){return(new Date).getTime()},ge=Object.create||function(t){if(arguments.length>1)throw Error("Second argument not supported");if("object"!=typeof t)throw new TypeError("Argument must be an object");return n.prototype=t,new n},we={mixin:function(t){return t.on=this.on,t.off=this.off,t.trigger=this.trigger,t._promiseCallbacks=void 0,t},on:function(t,e){var r,n=u(this);r=n[t],r||(r=n[t]=[]),-1===o(r,e)&&r.push(e)},off:function(t,e){var r,n,i=u(this);return e?(r=i[t],n=o(r,e),-1!==n&&r.splice(n,1),void 0):(i[t]=[],void 0)},trigger:function(t,e){var r,n,o=u(this);if(r=o[t])for(var i=0;r.length>i;i++)n=r[i],n(e)}},be={instrument:!1};we.mixin(be);var Ee=[],ke=s,xe=void 0,Se=1,Ae=2,Te=new E,je=new E,Oe=T;T.prototype._validateInput=function(t){return me(t)},T.prototype._validationError=function(){return Error("Array Methods must be provided an Array")},T.prototype._init=function(){this._result=Array(this.length)},T.prototype._enumerate=function(){for(var t=this,e=t.length,r=t.promise,n=t._input,o=0;r._state===xe&&e>o;o++)t._eachEntry(n[o],o)},T.prototype._eachEntry=function(t,e){var n=this,o=n._instanceConstructor;r(t)?t.constructor===o&&t._state!==xe?(t._onError=null,n._settledAt(t._state,e,t._result)):n._willSettleAt(o.resolve(t),e):(n._remaining--,n._result[e]=n._makeResult(Se,e,t))},T.prototype._settledAt=function(t,e,r){var n=this,o=n.promise;o._state===xe&&(n._remaining--,n._abortOnReject&&t===Ae?g(o,r):n._result[e]=n._makeResult(t,e,r)),0===n._remaining&&_(o,n._result)},T.prototype._makeResult=function(t,e,r){return r},T.prototype._willSettleAt=function(t,e){var r=this;w(t,void 0,function(t){r._settledAt(Se,e,t)},function(t){r._settledAt(Ae,e,t)})};var Ce=j,Re=O,Ie=C,Pe=R,Ne="rsvp_"+_e()+"-",qe=0,Me=N;N.cast=Ie,N.all=Ce,N.race=Re,N.resolve=Ie,N.reject=Pe,N.prototype={constructor:N,_guidKey:Ne,_onError:function(t){be.async(function(e){setTimeout(function(){e._onError&&be.trigger("error",t)},0)},this)},then:function(t,e,r){var n=this,o=n._state;if(o===Se&&!t||o===Ae&&!e)return be.instrument&&ke("chained",n,n),n;n._onError=null;var u=new n.constructor(f,r),i=n._result;if(be.instrument&&ke("chained",n,u),o){var a=arguments[o-1];be.async(function(){x(o,u,a,i)})}else w(n,u,t,e);return u},"catch":function(t,e){return this.then(void 0,t,e)},"finally":function(t,e){var r=this,n=r.constructor;return r.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})},e)}},q.prototype=ge(Oe.prototype),q.prototype._superConstructor=Oe,q.prototype._makeResult=A,q.prototype._validationError=function(){return Error("allSettled must be called with an array")};var Ve=M,De=V,Ue=0;({}).toString;var Ye,Je,Ke=D,Ge="undefined"!=typeof window?window:void 0,He=Ge||{},Le=He.MutationObserver||He.WebKitMutationObserver,Be="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Fe="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Qe=Array(1e3);Je=Be?U():Le?J():Fe?K():void 0===Ge&&"function"==typeof require?L():G();var We=B,Xe=F,$e=Q;Q.prototype=ge(Oe.prototype),Q.prototype._superConstructor=Oe,Q.prototype._init=function(){this._result={}},Q.prototype._validateInput=function(t){return t&&"object"==typeof t},Q.prototype._validationError=function(){return Error("Promise.hash must be called with an object")},Q.prototype._enumerate=function(){var t=this,e=t.promise,r=t._input,n=[];for(var o in r)e._state===xe&&Object.prototype.hasOwnProperty.call(r,o)&&n.push({position:o,entry:r[o]});var u=n.length;t._remaining=u;for(var i,a=0;e._state===xe&&u>a;a++)i=n[a],t._eachEntry(i.entry,i.position)},W.prototype=ge($e.prototype),W.prototype._superConstructor=Oe,W.prototype._makeResult=A,W.prototype._validationError=function(){return Error("hashSettled must be called with an object")};var ze,Ze=X,tr=$,er=z,rr=new Z,nr=new Z,or=ue;if("object"==typeof self)ze=self;else{if("object"!=typeof global)throw Error("no global: `self` or `global` found");ze=global}var ur=ze,ir=ce,ar=fe,sr=le,cr=pe;if(be.async=Ke,"undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var fr=window.__PROMISE_INSTRUMENTATION__;i("instrument",!0);for(var lr in fr)fr.hasOwnProperty(lr)&&ve(lr,fr[lr])}var pr={race:ir,Promise:Me,allSettled:Ve,hash:tr,hashSettled:Ze,denodeify:or,on:ve,off:ye,map:er,filter:Xe,resolve:sr,reject:ar,all:De,rethrow:cr,defer:We,EventTarget:we,configure:i,async:he};"function"==typeof define&&define.amd?define(function(){return pr}):"undefined"!=typeof module&&module.exports?module.exports=pr:ur!==void 0&&(ur.RSVP=pr)}).call(this),function(t,e){"use strict";var r=e.head||e.getElementsByTagName("head")[0],n="basket-",o=5e3,u=[],i=function(t,e){try{return localStorage.setItem(n+t,JSON.stringify(e)),!0}catch(r){if(r.name.toUpperCase().indexOf("QUOTA")>=0){var o,u=[];for(o in localStorage)0===o.indexOf(n)&&u.push(JSON.parse(localStorage[o]));return u.length?(u.sort(function(t,e){return t.stamp-e.stamp}),basket.remove(u[0].key),i(t,e)):void 0}return}},a=function(t){var e=new RSVP.Promise(function(e,r){var n=new XMLHttpRequest;n.open("GET",t),n.onreadystatechange=function(){4===n.readyState&&(200===n.status||0===n.status&&n.responseText?e({content:n.responseText,type:n.getResponseHeader("content-type")}):r(Error(n.statusText)))},setTimeout(function(){4>n.readyState&&n.abort()},basket.timeout),n.send()});return e},s=function(t){return a(t.url).then(function(e){var r=c(t,e);return t.skipCache||i(t.key,r),r})},c=function(t,e){var r=+new Date;return t.data=e.content,t.originalType=e.type,t.type=t.type||e.type,t.skipCache=t.skipCache||!1,t.stamp=r,t.expire=r+1e3*60*60*(t.expire||o),t},f=function(t,e){return!t||0>t.expire-+new Date||e.unique!==t.unique||basket.isValidItem&&!basket.isValidItem(t,e)},l=function(t){var e,r,n;if(t.url)return t.key=t.key||t.url,e=basket.get(t.key),t.execute=t.execute!==!1,n=f(e,t),t.live||n?(t.unique&&(t.url+=(t.url.indexOf("?")>0?"&":"?")+"basket-unique="+t.unique),r=s(t),t.live&&!n&&(r=r.then(function(t){return t},function(){return e}))):(e.type=t.type||e.originalType,e.execute=t.execute,r=new RSVP.Promise(function(t){t(e)})),r},p=function(t,n){var o=e.createElement(n);"style"===n?(o.setAttribute("type","text/css"),o.textContent+=t.data):o.text=t.data,o.defer=!0,r.appendChild(o)},h={"default":p},v=function(t){var e="script";return"application/javascript"!==t.type&&(e="style"),h["default"](t,e)},y=function(t){return t.map(function(t){return t.execute&&v(t),t})},d=function(){var t,e,r=[];for(t=0,e=arguments.length;e>t;t++)r.push(l(arguments[t]));return RSVP.all(r)},m=function(){var t=d.apply(null,arguments),e=this.then(function(){return t}).then(y);return e.thenRequire=m,e};t.basket={require:function(){for(var t=0,e=arguments.length;e>t;t++)arguments[t].execute=arguments[t].execute!==!1,arguments[t].once&&u.indexOf(arguments[t].url)>=0?arguments[t].execute=!1:arguments[t].execute!==!1&&0>u.indexOf(arguments[t].url)&&u.push(arguments[t].url);var r=d.apply(null,arguments).then(y);return r.thenRequire=m,r},remove:function(t){return localStorage.removeItem(n+t),this},get:function(t){var e=localStorage.getItem(n+t);try{return JSON.parse(e||"false")}catch(r){return!1}},clear:function(t){var e,r,o=+new Date;for(e in localStorage)r=e.split(n)[1],r&&(!t||o>=this.get(r).expire)&&this.remove(r);return this},isValidItem:null,timeout:5e3},basket.clear(!0)}(this,document);